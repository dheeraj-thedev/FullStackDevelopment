!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function fixupConfigObject(config){for(var key in config)if("string"==typeof key)try{config[key]=encodeURIComponent(JSON.stringify(config[key]))}catch(e){console.warn("Error encoding "+key+": "+e),delete config[key]}}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),EventEmitter=require("events").EventEmitter,loadScript=require("load-script2"),JitsiMeet=function(_EventEmitter){function JitsiMeet(baseUrl){_classCallCheck(this,JitsiMeet);var _this=_possibleConstructorReturn(this,(JitsiMeet.__proto__||Object.getPrototypeOf(JitsiMeet)).call(this));return _this._baseUrl=new window.URL(baseUrl),_this._ready=!1,setTimeout(function(){return _this._loadApi()}),_this}return _inherits(JitsiMeet,_EventEmitter),_createClass(JitsiMeet,[{key:"_loadApi",value:function(){var _this2=this;if(window.JitsiMeetExternalAPI)return this._ready=!0,void this.emit("ready");var apiUrl=this._baseUrl.href+"external_api.js";loadScript(apiUrl,function(err){err?(console.error("Error loading external API from "+apiUrl),_this2.emit("initError")):(_this2._ready=!0,_this2.emit("ready"))})}},{key:"join",value:function(room,selector,options){if(!this._ready)throw new Error("The library is not ready yet!");return new JitsiMeetConference(this._baseUrl,""+room,selector,options)}},{key:"ready",get:function(){return this._ready}}]),JitsiMeet}(EventEmitter),JitsiMeetConference=function(_EventEmitter2){function JitsiMeetConference(baseUrl,room,selector,options){_classCallCheck(this,JitsiMeetConference);var _this3=_possibleConstructorReturn(this,(JitsiMeetConference.__proto__||Object.getPrototypeOf(JitsiMeetConference)).call(this));_this3._roomUrl=""+baseUrl.href+room,_this3._node="string"==typeof selector?document.querySelector(selector):selector;var config=Object.assign({},options.config);config.startAudioMuted=9999,config.startVideoMuted=9999,config.enableRecording=!1,fixupConfigObject(config);var interfaceConfig=Object.assign({},options.interfaceConfig);return fixupConfigObject(interfaceConfig),_this3._api=new window.JitsiMeetExternalAPI(baseUrl.host,room,void 0,void 0,_this3._node,config,interfaceConfig,"https:"!==baseUrl.protocol),_this3._api.iframeHolder.style.height="100%",_this3._api.iframeHolder.style.width="100%",_this3._api.frame.style.border=0,_this3._avatarUrl="",_this3._displayName="",_this3._email="",_this3._audioMuted=!1,_this3._videoMuted=!1,_this3._shareScreen=!1,_this3._api.addEventListeners({videoConferenceJoined:_this3._onVideoConferenceJoined.bind(_this3),videoConferenceLeft:_this3._onVideoConferenceLeft.bind(_this3),readyToClose:_this3._onReadyToClose.bind(_this3)}),_this3}return _inherits(JitsiMeetConference,_EventEmitter2),_createClass(JitsiMeetConference,[{key:"hangup",value:function(){this._api.hangup()}},{key:"dispose",value:function(){null!==this._api&&(this._api.dispose(),this._api=null)}},{key:"_onVideoConferenceJoined",value:function(){this.emit("joined")}},{key:"_onVideoConferenceLeft",value:function(){this.emit("left")}},{key:"_onReadyToClose",value:function(){this.dispose()}},{key:"avatarUrl",get:function(){return this._avatarUrl},set:function(value){this._avatarUrl=value,this._api.executeCommand("avatarUrl",value)}},{key:"displayName",get:function(){return this._displayName},set:function(value){this._displayName=value,this._api.executeCommand("displayName",value)}},{key:"email",get:function(){return this._email},set:function(value){this._email=value,this._api.executeCommand("email",value)}},{key:"roomUrl",get:function(){return this._roomUrl}},{key:"audioMuted",get:function(){return this._audioMuted},set:function(muted){this._audioMuted!==muted&&(this._audioMuted=muted,this._api.executeCommand("toggleAudio"))}},{key:"videoMuted",get:function(){return this._videoMuted},set:function(muted){this._videoMuted!==muted&&(this._videoMuted=muted,this._api.executeCommand("toggleVideo"))}},{key:"shareScreen",get:function(){return this._shareScreen},set:function(share){this._shareScreen!==share&&(this._shareScreen=share,this._api.executeCommand("toggleShareScreen"))}}]),JitsiMeetConference}(EventEmitter);module.exports=JitsiMeet,"undefined"!=typeof window&&(window.JitsiMeet=JitsiMeet)},{events:2,"load-script2":3}],2:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){return this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],3:[function(require,module,exports){function load(src,cb){var head=document.head||document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=src,cb&&(script.onload=function(){script.onerror=script.onload=null,cb(null,script)},script.onerror=function(){script.onerror=script.onload=null,cb(new Error("Failed to load "+src),script)}),head.appendChild(script)}module.exports=load},{}]},{},[1]);
